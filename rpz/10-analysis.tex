\chapter{Аналитический раздел}
\label{cha:analysis}
	Перед проведением анализа необходимо разбить реализацию на независимые части. Для каждой предстоит выбрать алгоритм, удовлетворяющий поставленным задачам. Проанализировав возможные методы реализации были выделены следующие подсистемы:
\begin{itemize}
\item Способы управления курсором.
\item Передача данных с Android-устройства.
\item Обработка полученных данных.
\item Взаимодействие с ядром.
\end{itemize}
\begin{figure}
  \centering
  \includegraphics[scale=0.75]{analysis/structure}
  \caption{Общая структура.}
  \label{fig: view_arch}
\end{figure}
\label{sec: gyro&accel}
\section{Выбор способа управления}
	Для выбора способа управления необходимо отталкиваться от поставленных задач. Самый распространенный вариант - имитация сенсорной панели. При такой реализации дрожание курсора зависит лишь от задержки обработки данных. С другой стороны, присутствие в Android-устройствах таких датчиков\cite{gyr&accel}, как G-сенсор и гироскоп, дают дополнительную степень свободы, что позволяет получить большую функциональность.
	
	Гироскоп (гиродатчик) - устройство, позволяющее определить ориентацию в пространстве, используя гравитацию Земли. По количеству степеней свободы различают: двухстепенные и трехстепенные. На Android устройствах на сегодняшний день установлены вибрачионные микрогироскопы, принцип действия которых основан на силе Кориолиса\cite{coriolis}. 
	
	Акселерометр (G-сенсор) - устройство, предназначенное для измерения негравитационного ускорения. Различают три типа: однокомпонентные, двухкомпонентные и трехкомпонентные. Чтобы определить ориентацию в пространстве, необходимо данные измерения проинтегрировать, получая инерциальную скорость и координаты устройства. 

	Основным из преимуществ гироскопа является то, что акселерометр не в состоянии отличить гравитационное ускорение от любого другого. Находясь в системе отсчета, которая ускорено движется в определенном направлении, данный датчик будет показывать некорректные результаты. Гироскопы в свою очередь ориентируются лишь на гравитацию и не зависят от внешних факторов, поэтому и были выбраны в качестве способа управления.
\label{sec: bt&wifi}
\section{Методы передачи данных}
	Взаимодействие Android-устройства и персонального компьютера является необходимой частью реализации, поэтому необходимо выбрать один из существующих методов. Основными факторами выбора будут: радиус действия, скорость передачи и сложность настройки. Вариант с USB 3.0, не смотря на высокую скорость, не подходит из-за наличия проводной передачи данных.
	
	Bluetooth и wi-fi\cite{bt&wifi} являются беспроводными стандартами связи и используют для передачи данных определенные радиочастоты. Чтобы определиться с выбором метода, составим таблицу из самых распространенных стандартов с данными о радиусах действия и максимальных скоростях передач.
\begin{center}
\begin{table}[h]
  \caption{Сравнение стандартов}
  \begin{tabular}{|r|c|c|}
 	\hline
    Стандарт 		& Дистанция(в помещении), m & Скорость, Mbps \\
    \hline
    Wi-fi			&                	 		&              	 \\
    \hline
	IEEE 802.11.g   & 			38 		   		&    	54     	 \\
    IEEE 802.11.n   & 			70		   		&      600     	 \\
    \hline
    Bluetooth		&					   		&				 \\
    \hline
    Bluetooth 3.0	&			10		   		&		24		 \\
    Bluetooth 4.0	&			60	 	   		&		30 		 \\
    \hline
  \end{tabular}
  \label{tabl: bt&wifi}
\end{table}
\end{center}

	В таблице~\ref{tabl: bt&wifi} наглядно видно, что wi-fi обладает лучшими характеристиками. Но для передачи информации он требует тщательной настройки параметров, а также обязательного наличия третьего звена - точки-маршрутизатора. Возможен вариант соединения ad-hoc, который позволяет соединяться напрямую, но при этом станет невозможно подключить другие устройства. Bluetooth же не требует никакого дополнительного конфигурирования и позволяет подключить несколько устройств одновременно. Для передачи координат с Android-устройства хватает скорости передачи и bluetooth, поэтому он выбран для реализации передачи информации.

\label{sec: int_event}	
\section{Интерфейсы событий}
	В операционной системе Linux для решения поставленной задачи существует специальная подсистема ввода ядра\cite{ldd3}, которая объединяет все рассеянные драйвера для обработки перифирийных устройств. Одним из ее плюсов является удобный интерфейс событий, позволяющий драйверу не создавать и не управлять узлами /dev и связанными с ними методами доступа. Вместо этого он имеет возможность вызывать API для ввода, чтобы отправить движения мыши. Такие системы, как X Window, хорошо взаимодействуют с интерфейсами событий, экспортируемыми подсистемой ввода. 

	Чтобы выбрать один из возможных интерфейсов, необходимо обозначить требования, которым он должен соответствовать, и ознакомиться со всеми доступными вариантами. Исходя из задач, поставленных в рамках реализации, основным требованием к интерфейсу является необходимая функциональность. Кроме движения мыши, драйвер событий должен предоставлять возможность нажатия на кнопки мыши. Рассмотрим три возможных варианта: evdev, mousedev и собственный интерфейс.

	<<\verb|Evdev|>> - универсальный драйвер событий ввода. Каждый пакет события, создаваемый <<\verb|evdev|>>, имеет строго определенный формат и содержит в себе следующие параметры: время, тип события, код события, значение события. Одно из преимуществ интерфейса является простота использования и универсальность. Кроме того, он имеет возможность работать с акселерометром, что упростит задачу преобразования данных, и оснащен минимальным требуемым функционалом для решения задачи.

	<<\verb|Mousedev|>> - специальный драйвер событий ввода для мыши. В отличие от универсального evdev, этот интерфейс предназначен лишь для одного перефирийного устройства, и не умеет взаимодействовать с такими датчиками, как гироскоп и акселерометр. Функций у драйвера намного больше.

	Помимо готовых вариантов, имеется возможность написать собственный драйвер событий. Является более гибким вариантом, чем два, представленных выше, поскольку мы сможем постепенно наращивать функционал.

	Для решения поставленной задачи целесообразней использовать универсальный драйвер событий ввода. Поскольку он оснащен требуемой функциональностью, и прост в использовании.
	
%%% Local Variables: debug
%%% mode: latex
%%% TeX-master: "rpz-os"
%%% End: